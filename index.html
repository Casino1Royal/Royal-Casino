<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Casino Royale - Home</title>
<link rel="stylesheet" href="styles.css" />
<style>
  body.fade-out {
    opacity: 0;
    transition: opacity 0.6s ease;
  }
  .home-container {
    max-width: 1024px;
    margin: 100px auto 80px auto;
    background: linear-gradient(145deg, #292d3d, #1a1b29);
    border-radius: 32px;
    padding: 48px 64px;
    box-shadow:
      inset 0 0 40px 12px #d7c859aa,
      0 0 60px 15px #d7c859aa;
    color: #f5e58f;
    font-family: 'Playfair Display', serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    user-select: none;
  }
  .welcome-title {
    font-size: 3.4rem;
    margin-bottom: 24px;
    text-shadow: 0 0 20px #d7c859cc;
  }
  .welcome-subtitle {
    font-size: 1.6rem;
    margin-bottom: 48px;
    max-width: 720px;
    text-align: center;
    line-height: 1.5;
  }
  .game-buttons {
    display: flex;
    gap: 36px;
    flex-wrap: wrap;
    justify-content: center;
    width: 100%;
  }
  .game-btn {
    background: #d7c859;
    border: none;
    border-radius: 60px;
    padding: 24px 48px;
    font-size: 1.8rem;
    font-weight: 700;
    color: #19191a;
    box-shadow:
      0 0 40px 15px #d7c859cc,
      inset 0 0 30px #fffacdcc;
    cursor: pointer;
    user-select: none;
    transition: all 0.4s ease;
    flex: 1 1 260px;
    text-align: center;
  }
  .game-btn:hover {
    box-shadow:
      0 0 56px 22px #fffacd,
      inset 0 0 40px #fffacd;
    transform: scale(1.12);
  }
  .footer {
    margin-top: 80px;
    font-size: 0.9rem;
    color: #a8a845cc;
    text-align: center;
    user-select: none;
  }
</style>
</head>
<body>
  <header class="casino-header">
    <h1>Casino Royale</h1>
    <nav class="nav-tabs">
      <button class="tab-button active" data-link="index.html">Home</button>
      <button class="tab-button" data-link="blackjack.html">Blackjack</button>
      <button class="tab-button" data-link="roulette.html">Roulette</button>
      <button class="tab-button" data-link="slots.html">Slots</button>
    </nav>
    <div style="display: flex; align-items: center;">
      <div class="balance-container" id="balance-display">Balance: $1000</div>
      <button id="logoutBtn" style="margin-left: 16px; background:#a33; color:#fff; border:none; border-radius:20px; padding:6px 14px; cursor:pointer; font-weight:700; user-select:none; display:none;">
        Logout
      </button>
    </div>
  </header>

  <main class="home-container">
    <h2 class="welcome-title">Welcome to Casino Royale</h2>
    <p class="welcome-subtitle">
      Step into the world of luxury and excitement. Try your luck at our thrilling games:
      Blackjack, Roulette, and Slots. Place your bets, hit the tables, and spin to win big!
      Your balance carries across all games. Good luck and may fortune favor you!
    </p>
    <div class="game-buttons">
      <button class="game-btn" data-link="blackjack.html">Play Blackjack</button>
      <button class="game-btn" data-link="roulette.html">Play Roulette</button>
      <button class="game-btn" data-link="slots.html">Play Slots</button>
    </div>
  </main>

<script>
  // References
  const balanceDisplay = document.getElementById('balance-display');
  const logoutBtn = document.getElementById('logoutBtn');

  // Check logged-in user
  let currentUser = localStorage.getItem('casinoUser');
  if (!currentUser) {
    // Redirect to login page if not logged in
    window.location.href = 'login.html';
  } else {
    // Load balance for current user or initialize if missing
    let balanceKey = `casinoBalance_${currentUser}`;
    let balance = parseInt(localStorage.getItem(balanceKey));
    if (isNaN(balance)) {
      balance = 1000;
      localStorage.setItem(balanceKey, balance);
    }
    balanceDisplay.textContent = `Balance: $${balance}`;

    // Show logout button
    logoutBtn.style.display = 'inline-block';

    // Create refill button but hide initially
    let refillBtn = document.createElement('button');
    refillBtn.textContent = 'Refill $1000';
    refillBtn.style.cssText = 'margin-left:12px; background:#d7c859; border:none; padding:6px 14px; border-radius:20px; cursor:pointer; font-weight:700; user-select:none;';
    refillBtn.style.display = 'none';
    balanceDisplay.parentNode.insertBefore(refillBtn, balanceDisplay.nextSibling);

    // Show refill if balance 0 or less
    if (balance <= 0) {
      refillBtn.style.display = 'inline-block';
    }

    refillBtn.addEventListener('click', () => {
      balance += 1000;
      localStorage.setItem(balanceKey, balance);
      balanceDisplay.textContent = `Balance: $${balance}`;
      refillBtn.style.display = 'none';
    });

    // Logout functionality
    logoutBtn.addEventListener('click', () => {
      localStorage.removeItem('casinoUser');
      window.location.href = 'login.html';
    });

    // Navigation fade animation and balance sync
    document.querySelectorAll('.tab-button[data-link], .game-btn[data-link]').forEach(btn => {
      btn.addEventListener('click', e => {
        if (btn.classList.contains('active')) return;
        document.body.classList.add('fade-out');
        setTimeout(() => {
          window.location.href = btn.getAttribute('data-link');
        }, 600);
      });
    });
  }
</script>
</body>
</html>
